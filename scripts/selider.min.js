$.fn.selider=function(k){var f=$(this),w=f.width(),o=f.find("ul"),h=o.find("li").length,e=h+1,D=$("#sThumbnail"),C=D.find("ul"),B=C.find("li"),q=$("#sThumbPrev"),r=$("#sThumbNext"),s=true,A=false,F=q.outerWidth(s)*2,x=parseInt(D.css("border-left-width"))*2,c=parseInt($("#sThumbContainer").css("margin-left")),l=w-(F+x+c),d=Math.round(h/(l/B.outerWidth(s))),b=0,z=0,y=0,E=$.extend({speed:4000,pause:s,nextPrev:s,paging:A,thumbnail:A},k),n,G,u,v,p,t,a=function(){clearTimeout(v);if(z==e){z=0;o.css("left",0);a()}else{v=setTimeout(a,E.speed)}if(E.paging){u.eq(z==h?0:z).addClass("on").siblings().removeClass("on")}o.animate({left:-z*w},500);z++},H=function(){E.paging=A;q.click(function(){if(b>0){--b;C.animate({left:-l*b},400)}});r.click(function(){if(d>b){++b;C.animate({left:-l*b},400)}});B.click(function(){z=$(this).index();a()})},n=function(){f.after('<div id="sPaging"><ul/></div>');n=$("#sPaging"),G=n.find("ul");for(y;y<h;y++){G.append("<li/>")}u=G.find("li");n.css("width",w);G.css("width",h*u.outerWidth(s));u.click(function(){z=$(this).index();a()})},g=function(){f.append('<div id="sPrev"/><div id="sNext"/>');$("#sPrev").click(function(){z=(z!=1)?z-2:0;a()});$("#sNext").click(function(){a()})},m=function(){f.hover(function(){p=setInterval(function(){clearTimeout(v)},E.speed/2)},function(){clearInterval(p);v=setTimeout(a,E.speed)})};o.css("width",w*e).append(o.find("li:first").clone());E.thumbnail?H():t;E.paging?n():t;E.nextPrev?g():t;E.pause?m():t;a();return f};
